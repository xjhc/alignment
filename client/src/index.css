/* Import generated design tokens first */
@import './styles/generated/_variables.css';

/* Import Tailwind CSS */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom base layer styles */
@layer base {
  :root {
    /* Motion System Tokens */
    /* Duration Tokens */
    --duration-fast: 150ms;
    --duration-medium: 300ms;
    --duration-slow: 500ms;
    
    /* Easing Tokens */
    --ease-out: cubic-bezier(0.25, 0.46, 0.45, 0.94);
    --ease-in: cubic-bezier(0.55, 0.085, 0.68, 0.53);
    --ease-in-out: cubic-bezier(0.445, 0.05, 0.55, 0.95);
    --ease-feedback: cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  /* Theme variable definitions */
  html[data-theme='light'] {
    --bg-primary: var(--theme-light-bg-primary);
    --bg-secondary: var(--theme-light-bg-secondary);
    --bg-tertiary: var(--theme-light-bg-tertiary);
    --bg-quaternary: var(--theme-light-bg-quaternary);
    --bg-hover: var(--theme-light-bg-hover);
    --bg-mention: var(--theme-light-bg-mention);
    --text-primary: var(--theme-light-text-primary);
    --text-secondary: var(--theme-light-text-secondary);
    --text-muted: var(--theme-light-text-muted);
    --border: var(--theme-light-border);
    --shadow: var(--theme-light-shadow);
  }

  html[data-theme='dark'] {
    --bg-primary: var(--theme-dark-bg-primary);
    --bg-secondary: var(--theme-dark-bg-secondary);
    --bg-tertiary: var(--theme-dark-bg-tertiary);
    --bg-quaternary: var(--theme-dark-bg-quaternary);
    --bg-hover: var(--theme-dark-bg-hover);
    --bg-mention: var(--theme-dark-bg-mention);
    --text-primary: var(--theme-dark-text-primary);
    --text-secondary: var(--theme-dark-text-secondary);
    --text-muted: var(--theme-dark-text-muted);
    --border: var(--theme-dark-border);
    --shadow: var(--theme-dark-shadow);
  }

  /* CSS Reset and Base Styles */
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  /* Smooth theme transitions */
  *,
  *:before,
  *:after {
    transition: background-color 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                color 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                border-color 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                box-shadow 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }

  html {
    height: 100%;
  }

  body {
    font-family: var(--font-sans);
    background-color: var(--bg-primary);
    color: var(--text-primary);
    overflow: hidden;
    font-size: 12px;
    line-height: 1.4;
    font-weight: var(--font-weight-normal);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  #root {
    height: 100vh;
    width: 100vw;
  }

  h1, h2, h3, h4, h5, h6 {
    font-weight: var(--font-weight-semibold);
    color: var(--text-primary);
    letter-spacing: -0.025em;
  }

  button {
    font-family: inherit;
    cursor: pointer;
    border: none;
    background: none;
    color: inherit;
    transition: all 0.15s ease;
  }

  button:active:not(:disabled) {
    transform: scale(0.98);
  }

  button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none !important;
  }

  input {
    font-family: inherit;
  }
}

/* Custom component layer */
@layer components {
  /* Loading spinner component */
  .loading-spinner {
    @apply inline-block w-5 h-5 border-2 border-border border-t-primary rounded-full animate-loading-spinner;
  }

  .loading-spinner.large {
    @apply w-8 h-8 border-[3px];
  }

  /* Screen transition base class */
  .screen-transition {
    transition: opacity 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94),
                transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }
}

/* Motion System Keyframes */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes fadeOut {
  from { opacity: 1; }
  to { opacity: 0; }
}

@keyframes slideInUp {
  from { 
    opacity: 0; 
    transform: translateY(16px); 
  }
  to { 
    opacity: 1; 
    transform: translateY(0); 
  }
}

@keyframes slideInDown {
  from { 
    opacity: 0; 
    transform: translateY(-16px); 
  }
  to { 
    opacity: 1; 
    transform: translateY(0); 
  }
}

@keyframes slideInLeft {
  from { 
    opacity: 0; 
    transform: translateX(-16px); 
  }
  to { 
    opacity: 1; 
    transform: translateX(0); 
  }
}

@keyframes slideInRight {
  from { 
    opacity: 0; 
    transform: translateX(16px); 
  }
  to { 
    opacity: 1; 
    transform: translateX(0); 
  }
}

@keyframes slideOutUp {
  from { 
    opacity: 1; 
    transform: translateY(0); 
  }
  to { 
    opacity: 0; 
    transform: translateY(-16px); 
  }
}

@keyframes slideOutDown {
  from { 
    opacity: 1; 
    transform: translateY(0); 
  }
  to { 
    opacity: 0; 
    transform: translateY(16px); 
  }
}

@keyframes slideOutLeft {
  from { 
    opacity: 1; 
    transform: translateX(0); 
  }
  to { 
    opacity: 0; 
    transform: translateX(-16px); 
  }
}

@keyframes slideOutRight {
  from { 
    opacity: 1; 
    transform: translateX(0); 
  }
  to { 
    opacity: 0; 
    transform: translateX(16px); 
  }
}

@keyframes scaleIn {
  from { 
    opacity: 0; 
    transform: scale(0.95); 
  }
  to { 
    opacity: 1; 
    transform: scale(1); 
  }
}

@keyframes scaleOut {
  from { 
    opacity: 1; 
    transform: scale(1); 
  }
  to { 
    opacity: 0; 
    transform: scale(0.95); 
  }
}

/* Game-specific animations */
@keyframes glitch {
  0%, 100% {
    transform: translate(0, 0);
    text-shadow: none;
  }
  20% {
    transform: translate(-1px, 1px);
    text-shadow: -1px 0 var(--accent-cyan), 1px 0 var(--accent-magenta);
  }
  40% {
    transform: translate(1px, -1px);
    text-shadow: -1px 0 var(--accent-cyan), 1px 0 var(--accent-magenta);
  }
  60% {
    transform: translate(-1px, 1px);
    text-shadow: -1px 0 var(--accent-cyan), 1px 0 var(--accent-magenta);
  }
  80% {
    transform: translate(1px, -1px);
    text-shadow: -1px 0 var(--accent-cyan), 1px 0 var(--accent-magenta);
  }
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
  20%, 40%, 60%, 80% { transform: translateX(4px); }
}

@keyframes flipCard {
  0% { transform: perspective(1000px) rotateY(0); }
  50% { transform: perspective(1000px) rotateY(90deg); }
  100% { transform: perspective(1000px) rotateY(0); }
}

@keyframes cardFlipIn {
  0% {
    transform: perspective(1000px) rotateY(-90deg);
    opacity: 0;
  }
  50% {
    opacity: 0.5;
  }
  100% {
    transform: perspective(1000px) rotateY(0);
    opacity: 1;
  }
}

@keyframes eliminationFade {
  0% {
    filter: none;
    transform: scale(1);
  }
  50% {
    filter: hue-rotate(0deg) saturate(2) brightness(1.2);
    transform: scale(1.02);
  }
  100% {
    filter: hue-rotate(60deg) saturate(0.3) brightness(0.6);
    transform: scale(0.98);
  }
}

@keyframes loadingSpinner {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes progressBarFill {
  0% { width: 0%; }
  100% { width: var(--target-width, 100%); }
}

/* Motion System Animation Classes */
@layer utilities {
  /* Fade Animations */
  .animation-fade-in {
    animation: fadeIn var(--duration-medium) var(--ease-out) forwards;
  }
  
  .animation-fade-out {
    animation: fadeOut var(--duration-medium) var(--ease-in) forwards;
  }
  
  /* Slide In Animations */
  .animation-slide-in-up {
    animation: slideInUp var(--duration-medium) var(--ease-out) forwards;
  }
  
  .animation-slide-in-down {
    animation: slideInDown var(--duration-medium) var(--ease-out) forwards;
  }
  
  .animation-slide-in-left {
    animation: slideInLeft var(--duration-medium) var(--ease-out) forwards;
  }
  
  .animation-slide-in-right {
    animation: slideInRight var(--duration-medium) var(--ease-out) forwards;
  }
  
  /* Slide Out Animations */
  .animation-slide-out-up {
    animation: slideOutUp var(--duration-medium) var(--ease-in) forwards;
  }
  
  .animation-slide-out-down {
    animation: slideOutDown var(--duration-medium) var(--ease-in) forwards;
  }
  
  .animation-slide-out-left {
    animation: slideOutLeft var(--duration-medium) var(--ease-in) forwards;
  }
  
  .animation-slide-out-right {
    animation: slideOutRight var(--duration-medium) var(--ease-in) forwards;
  }
  
  /* Scale Animations */
  .animation-scale-in {
    animation: scaleIn var(--duration-medium) var(--ease-out) forwards;
  }
  
  .animation-scale-out {
    animation: scaleOut var(--duration-medium) var(--ease-in) forwards;
  }
  
  /* Stagger Animation Base Class */
  .stagger-child {
    opacity: 0;
    animation: slideInUp var(--duration-medium) var(--ease-out) forwards;
  }
  
  /* Fast Duration Variants */
  .animation-fade-in-fast {
    animation: fadeIn var(--duration-fast) var(--ease-out) forwards;
  }
  
  .animation-slide-in-up-fast {
    animation: slideInUp var(--duration-fast) var(--ease-out) forwards;
  }
  
  .animation-scale-in-fast {
    animation: scaleIn var(--duration-fast) var(--ease-out) forwards;
  }
  
  /* Slow Duration Variants */
  .animation-fade-in-slow {
    animation: fadeIn var(--duration-slow) var(--ease-out) forwards;
  }
  
  .animation-slide-in-up-slow {
    animation: slideInUp var(--duration-slow) var(--ease-out) forwards;
  }
  
  .animation-scale-in-slow {
    animation: scaleIn var(--duration-slow) var(--ease-out) forwards;
  }
  
  /* Feedback Variants */
  .animation-scale-in-feedback {
    animation: scaleIn var(--duration-medium) var(--ease-feedback) forwards;
  }
  
  /* Game-specific animation classes */
  .animation-glitch {
    animation: glitch var(--duration-fast) var(--ease-in-out) infinite;
  }
  
  .animation-pulse {
    animation: pulse 2s var(--ease-in-out) infinite;
  }
  
  .animation-shake {
    animation: shake var(--duration-fast) var(--ease-in-out);
  }
  
  .animation-flip-card {
    animation: flipCard var(--duration-slow) var(--ease-in-out);
  }
  
  .animation-card-flip-in {
    animation: cardFlipIn var(--duration-slow) var(--ease-out) forwards;
  }
  
  .animation-elimination-fade {
    animation: eliminationFade var(--duration-slow) var(--ease-in-out) forwards;
  }
}

/* Blockchain Voting UI Styles */
@layer components {
  /* Verdict poll container */
  .verdict-poll {
    @apply flex flex-col gap-2;
  }

  /* Vote option rows */
  .vote-option {
    @apply flex items-center gap-3 px-4 py-2 rounded-md border transition-all duration-150;
    @apply bg-[var(--bg-primary)] border-[var(--border)];
  }

  .vote-option:hover {
    @apply bg-[var(--bg-tertiary)];
  }

  .vote-option.yes .option-label,
  .vote-option.yes .vote-tally {
    @apply text-green-500;
  }

  .vote-option.no .option-label,
  .vote-option.no .vote-tally {
    @apply text-red-500;
  }

  .option-label {
    @apply font-bold text-sm min-w-[50px];
  }

  .vote-tally {
    @apply font-mono text-sm font-bold min-w-[35px] text-right;
  }

  /* Blockchain chain container */
  .blockchain-chain {
    @apply flex-grow flex gap-4 items-center justify-start overflow-x-auto py-2;
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .blockchain-chain::-webkit-scrollbar {
    display: none;
  }

  /* Individual vote blocks */
  .vote-block {
    @apply min-w-[80px] flex-shrink-0 p-2 rounded-md text-center relative transition-all duration-200;
    @apply bg-white border border-gray-300 shadow-sm;
  }

  html[data-theme='dark'] .vote-block {
    @apply bg-[var(--bg-primary)] border-[var(--border)];
  }

  .vote-block:hover {
    @apply transform -translate-y-0.5 shadow-md;
  }

  /* Chain connectors */
  .vote-block:not(:last-child)::after {
    content: '';
    @apply absolute top-1/2 -right-2 w-1.5 h-0.5 bg-gray-400 rounded-sm transform -translate-y-1/2;
  }

  html[data-theme='dark'] .vote-block:not(:last-child)::after {
    @apply bg-gray-600;
  }

  /* Block header (icon + token amount) */
  .block-header {
    @apply flex items-center justify-center gap-1 font-bold text-xs mb-1;
    @apply text-[var(--text-primary)];
  }

  .block-icon {
    @apply text-sm leading-none;
  }

  .block-amount {
    @apply font-mono text-xs font-bold;
  }

  /* Block hash (player name) */
  .block-hash {
    @apply font-sans text-xs font-medium leading-tight;
    @apply text-[var(--text-secondary)];
  }

  /* Highlight for user's own vote */
  .vote-block.my-vote {
    @apply bg-amber-400 border-amber-500 shadow-amber-200;
  }

  html[data-theme='dark'] .vote-block.my-vote {
    @apply bg-amber-500 border-amber-600 shadow-amber-900/50;
  }

  .vote-block.my-vote .block-header {
    @apply text-amber-900;
  }

  .vote-block.my-vote .block-hash {
    @apply text-amber-800;
  }

  /* Vote buttons */
  .option-vote-btn {
    @apply text-xs font-bold px-3 py-1.5 rounded border transition-all duration-150 min-w-[60px];
    @apply bg-[var(--bg-tertiary)] border-[var(--border)];
  }

  .option-vote-btn.voted {
    @apply bg-amber-500 border-amber-500 text-black;
  }

  .vote-option.yes .option-vote-btn:hover:not(.voted):not(:disabled) {
    @apply bg-green-500 border-green-500 text-white transform scale-105;
  }

  .vote-option.no .option-vote-btn:hover:not(.voted):not(:disabled) {
    @apply bg-red-500 border-red-500 text-white transform scale-105;
  }

  .option-vote-btn:disabled {
    @apply opacity-50 cursor-not-allowed;
  }
}